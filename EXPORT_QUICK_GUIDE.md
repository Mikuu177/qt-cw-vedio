# 导出功能快速指南

**最后更新**: 2025-12-02
**状态**: ✅ 已修复并测试

---

## 🎬 导出视频 - 3 步完成

### 步骤 1: 添加视频片段

```
1. 点击时间轴中的 "+ Add Clip" 按钮
2. 选择要添加的视频文件
3. 片段会自动添加到时间轴
```

**快捷键**: 无 (只能通过按钮)

**支持的格式**: MP4, AVI, MOV, MKV 等

### 步骤 2: 打开导出对话框

```
按 Ctrl+E
或
菜单 → File → Export Video
```

**对话框选项**:
- 输出文件路径 (必填)
- 质量预设 (High/Medium/Low)
- 过渡效果 (可选)

### 步骤 3: 导出

```
1. 选择输出文件路径
2. 选择质量预设
3. 点击 "Export" 按钮
4. 等待导出完成
```

**导出时间**: 取决于视频大小和质量

---

## 📊 导出模式自动选择

应用会根据时间轴内容自动选择导出模式：

### 模式 1: 多片段导出 ⭐ 推荐

**条件**: 时间轴中有 2 个或更多片段

**功能**:
- 合并所有片段
- 支持过渡效果
- 自动按顺序拼接

**示例**:
```
片段 1 (35秒) + 片段 2 (7秒) = 输出 (42秒)
```

### 模式 2: 裁剪导出

**条件**: 设置了 In/Out 点 (I/O 键)

**功能**:
- 按 In/Out 点裁剪
- 导出裁剪后的视频

**示例**:
```
原视频 (100秒) → 裁剪 10-50秒 → 输出 (40秒)
```

### 模式 3: 完整导出

**条件**: 单个视频，无裁剪

**功能**:
- 直接复制视频
- 最快的导出方式

**示例**:
```
原视频 (100秒) → 输出 (100秒)
```

---

## ⚙️ 质量预设

### High (1080p) - 最佳质量

```
分辨率: 1080p (原始)
编码: H.264, CRF 18
音频: 192k AAC
文件大小: 最大
导出时间: 最长
```

**适用场景**: 最终输出、存档

### Medium (720p) - 平衡

```
分辨率: 720p
编码: H.264, CRF 23
音频: 128k AAC
文件大小: 中等
导出时间: 中等
```

**适用场景**: 日常使用、分享

### Low (480p) - 最小文件

```
分辨率: 480p
编码: H.264, CRF 28
音频: 96k AAC
文件大小: 最小
导出时间: 最短
```

**适用场景**: 快速预览、移动设备

---

## 🔄 过渡效果 (Transitions)

### 启用过渡效果

```
1. 打开导出对话框
2. 勾选 "Enable crossfade between clips"
3. 设置过渡时长 (100-3000ms)
4. 点击导出
```

### 过渡效果说明

- **Crossfade**: 淡入淡出效果
- **时长**: 两个片段重叠的时间
- **默认**: 500ms (0.5秒)

### 示例

```
无过渡:
片段 1 (0-35秒) | 片段 2 (35-42秒)
                 ↑ 硬切

有过渡 (500ms):
片段 1 (0-35秒) 
              ╱╲ 淡入淡出 (500ms)
                 片段 2 (34.5-42秒)
```

---

## ⚠️ 常见问题

### Q: 导出按钮不工作

**A**: 检查以下几点：
1. ✅ 是否有视频或片段加载
2. ✅ 是否选择了输出文件路径
3. ✅ 是否有足够的磁盘空间

### Q: 导出失败 - FFmpeg Not Found

**A**: 需要安装 FFmpeg (用于多片段导出)

**安装步骤**:
1. 下载: https://ffmpeg.org/download.html
2. 解压到 `C:\ffmpeg`
3. 添加 `C:\ffmpeg\bin` 到系统 PATH
4. 重启应用

**检查 FFmpeg**:
```bash
ffmpeg -version
```

### Q: 导出速度很慢

**A**: 这是正常的，可以：
1. 选择较低的质量预设
2. 关闭过渡效果
3. 使用更快的计算机

### Q: 导出的文件很大

**A**: 选择较低的质量预设：
- High: 最大 (原始分辨率)
- Medium: 中等 (720p)
- Low: 最小 (480p)

### Q: 导出后视频无法播放

**A**: 可能的原因：
1. 视频格式不兼容
2. 导出被中断
3. 磁盘空间不足

**解决方案**:
1. 检查输出文件大小 (应该 > 0)
2. 尝试用 VLC 播放
3. 重新导出

---

## 🎯 快速参考

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+E | 打开导出对话框 |
| Ctrl+O | 打开视频 |
| Ctrl+Z | 撤销 |
| Ctrl+Y | 重做 |

### 菜单路径

```
File
├─ Open Video (Ctrl+O)
├─ Export Video (Ctrl+E)
└─ Exit (Ctrl+Q)

Edit
├─ Undo (Ctrl+Z)
├─ Redo (Ctrl+Y)
└─ Clear Trim Points

Timeline
├─ Add Clip
├─ Clear Timeline
└─ ...

View
├─ Toggle High Contrast (Ctrl+Shift+H)
└─ ...

Help
├─ Keyboard Shortcuts (F1)
└─ About
```

---

## 📝 导出示例

### 示例 1: 合并两个视频

```
1. 点击 "+ Add Clip"
   → 选择 video1.mp4
   
2. 点击 "+ Add Clip"
   → 选择 video2.mp4
   
3. 按 Ctrl+E
   → 选择输出路径: output.mp4
   → 选择质量: High
   → 点击 Export
   
4. 等待完成
   → 输出: output.mp4 (video1 + video2)
```

### 示例 2: 裁剪视频

```
1. 打开视频 (Ctrl+O)
   → 选择 video.mp4
   
2. 设置裁剪点
   → 按 I 设置入点 (10秒)
   → 按 O 设置出点 (50秒)
   
3. 按 Ctrl+E
   → 选择输出路径: output.mp4
   → 选择质量: Medium
   → 点击 Export
   
4. 等待完成
   → 输出: output.mp4 (10-50秒)
```

### 示例 3: 合并多个视频 + 过渡

```
1. 添加 3 个视频片段
   → "+ Add Clip" × 3
   
2. 按 Ctrl+E
   → 选择输出路径: output.mp4
   → 选择质量: Medium
   → ✓ 启用过渡效果
   → 过渡时长: 500ms
   → 点击 Export
   
4. 等待完成
   → 输出: output.mp4 (3个视频 + 过渡)
```

---

## 🔧 技术信息

### 支持的视频格式

**输入格式**: MP4, AVI, MOV, MKV, WMV 等

**输出格式**: MP4 (H.264)

### 编码参数

| 参数 | 值 |
|------|-----|
| 视频编码 | H.264 (libx264) |
| 音频编码 | AAC |
| 容器 | MP4 |
| 帧率 | 原始 (通常 30fps) |

### 系统要求

- **Python**: 3.8+
- **PyQt5**: 5.15.7+
- **OpenCV**: 4.6.0+
- **FFmpeg**: 4.0+ (用于多片段导出)

---

## ✅ 检查清单

导出前检查：

- [ ] 视频已加载或片段已添加
- [ ] 输出文件路径已选择
- [ ] 输出文件夹有写入权限
- [ ] 磁盘空间充足
- [ ] 如需多片段导出，FFmpeg 已安装

导出后检查：

- [ ] 输出文件已创建
- [ ] 文件大小 > 0
- [ ] 视频可以播放
- [ ] 视频时长正确

---

**更新时间**: 2025-12-02
**版本**: 1.0
**状态**: ✅ 已验证



